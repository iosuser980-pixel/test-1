-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "ActionRecorderGui"
screenGui.Parent = game.Players.LocalPlayer:WaitForChild("PlayerGui")

-- Create Frame for menu
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 220, 0, 120)
frame.Position = UDim2.new(0, 10, 0, 10)
frame.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
frame.Parent = screenGui

-- Create Button to start recording
local startButton = Instance.new("TextButton")
startButton.Size = UDim2.new(1, -20, 0, 40)
startButton.Position = UDim2.new(0, 10, 0, 10)
startButton.Text = "Start Recording"
startButton.Parent = frame

-- Create Button to stop recording
local stopButton = Instance.new("TextButton")
stopButton.Size = UDim2.new(1, -20, 0, 40)
stopButton.Position = UDim2.new(0, 10, 0, 60)
stopButton.Text = "Stop Recording"
stopButton.Parent = frame

local isRecording = false
local connections = {}

-- Function to log mouse click positions
local function onMouseClick()
    local player = game.Players.LocalPlayer
    local mouse = player:GetMouse()
    -- Get the target position in 3D space
    local hitPosition = mouse.Hit.p
    print("Mouse clicked at: " .. tostring(hitPosition))
end

-- Start recording: connect mouse click event
local function startRecording()
    if not isRecording then
        isRecording = true
        -- Connect mouse button down event
        local conn = game.Players.LocalPlayer:GetMouse().Button1Down:Connect(function()
            onMouseClick()
        end)
        table.insert(connections, conn)
        print("Recording started.")
    end
end

-- Stop recording: disconnect all connections
local function stopRecording()
    if isRecording then
        isRecording = false
        for _, conn in ipairs(connections) do
            conn:Disconnect()
        end
        connections = {}
        print("Recording stopped.")
    end
end

-- Connect buttons
startButton.MouseButton1Click:Connect(startRecording)
stopButton.MouseButton1Click:Connect(stopRecording)
